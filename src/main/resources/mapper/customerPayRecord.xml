<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="demo.customerPayRecord.dao.CustomerPayRecordDAO">
	<insert id="inputPayRecord" parameterType="demo.customerPayRecord.vo.CustomerPayRecordVO">
		insert into customerPayRecord
		(customerSrl, useDate, useBalance, useBalanceContent, prepayment) values
		(#{customerSrl},#{useDate},#{useBalance},#{useBalanceContent},#{prepayment});
	</insert>
	<select id="pullCustomerPayRecordList" parameterType="Integer">
		select * from customerPayRecord where customerSrl=#{customerSrl};
	</select>
	<select id="pullCustomerBalance" parameterType="Integer">
		select useBalance,prepayment from customerPayRecord where customerSrl=#{customerSrl};
	</select>
	<select id="pullTodaySales" parameterType="Date">
		select useBalance as pullDaySales from customerPayRecord where date_format(current_date(),'%Y-%m-%d');
	</select>
	<select id="pullWeekSales">
		select useBalance as pullTermSales from customerPayRecord where date_format(useDate,'%Y-%m-%d')
		between date_format(date_add(now(),interval -7 day),'%Y-%m-%d')
		and date_format(now(),'%Y-%m-%d');
	</select>
	<select id="pullMonthSales">
		select useBalance as pullMonthSales from customerPayRecord where date_format(useDate, '%Y-%m-%d')
		between date_format(date_add(now(),interval -30 day),'%Y-%m-%d')
		and date_format(now(),'%Y-%m-%d');
	</select>

</mapper>
